---
title: "zipselect"
author: "Lucas Forrest"
date: "10/27/2021"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Library Packages

```{r library}
library(readr)

```

## Import Data

```{r import}
import.df <- read_csv("testdata.csv")
# Test/Validation
import.df <- read_csv("validate.csv")
head(import.df)
```

## Zip Code Selection

```{r}
# create df to hold zip information

selections.df <- data.frame()

for (r in 1:nrow(import.df)){
  selections.df[r, 1:3] <- import.df[r, 1:3]
  rn <- sample(4:8, 1)
  selections.df[r, 4] <- import.df[r, rn]
  selections.df[r, 5] <- rn
}

counter <- 0
maxiter <- 20 # nrow(selections.df)*5

while (counter <  maxiter | any(duplicated(selections.df[,4]))) {
  counter <- sum(counter, 1)
  dup.df <- data.frame(duplicated(selections.df[,4]))
  #print(dup.df)
  for (r in 1:nrow(dup.df)){
    if(dup.df[r,] == TRUE){
      rn <- sample(4:8, 1)
      selections.df[r, 4] <- import.df[r, rn]
    }
  }
}

print(paste("Max iterations: ", maxiter))
print(paste("Iterations performed: ", counter))
print(paste("Duplicates remain: ", any(duplicated(selections.df[,4]))))
head(selections.df)
```
